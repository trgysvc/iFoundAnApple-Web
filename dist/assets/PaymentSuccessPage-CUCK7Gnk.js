import{f as y,u as j,r as l,j as e}from"./react-vendor-D53OFC38.js";import{u as C}from"./admin-BX7ZIb8L.js";import{L as W,B as t,C as v}from"./ui-components-CIH4UXYK.js";import"./vendor-BmuKHae7.js";import"./supabase-Bn7hz90r.js";const w=()=>{const N=y(),u=j(),{currentUser:h,supabaseClient:m,t:D}=C(),a=new URLSearchParams(N.search).get("paymentId"),[n,b]=l.useState(null),[i,f]=l.useState(null),[x,d]=l.useState(!0),[r,E]=l.useState(null);l.useEffect(()=>{a&&P()},[a]);const P=async()=>{try{if(d(!0),!m)throw new Error("Supabase client is not available");console.log("Fetching payment data for ID:",a);const{data:s,error:o}=await m.from("payments").select("*").eq("id",a).single();if(o)throw new Error(`Payment fetch error: ${o.message}`);if(!s)throw new Error("Ödeme bilgileri bulunamadı. Lütfen ödeme sayfasına dönün.");if(s.payment_status!=="completed"&&s.payment_status!=="processing")throw new Error("Ödeme henüz tamamlanmamış veya başarısız. Lütfen ödeme sayfasına dönün.");b(s);const{data:A,error:p}=await m.from("escrow_accounts").select("*").eq("payment_id",a).single();if(p)throw new Error(`Escrow fetch error: ${p.message}`);f(A)}catch(s){console.error("Error fetching payment data:",s),E(s instanceof Error?s.message:"Unknown error")}finally{d(!1)}},c=()=>{u("/dashboard")},g=()=>{confirm("Ödemeyi iptal etmek istediğinizden emin misiniz? Bu işlem geri alınamaz.")&&u("/dashboard")};return x?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(W,{size:"large"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:120,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-4",children:"Ödeme bilgileri yükleniyor..."},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:121,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:119,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:118,columnNumber:7},void 0):r||!n?e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-red-500 text-6xl mb-4",children:"❌"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ödeme Bilgileri Bulunamadı"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:132,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:r||"Ödeme kaydı bulunamadı."},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:133,columnNumber:11},void 0),e.jsxDEV(t,{onClick:c,variant:"primary",children:"Ana Sayfaya Dön"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:134,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:130,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:129,columnNumber:7},void 0):e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:e.jsxDEV(v,{children:e.jsxDEV("div",{className:"max-w-2xl mx-auto py-12",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"text-green-500 text-6xl mb-4",children:"✅"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:148,columnNumber:13},void 0),e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ödeme Başarıyla Tamamlandı!"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:149,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600",children:"Ödemeniz güvenli escrow sisteminde bekletiliyor."},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:152,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:147,columnNumber:11},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ödeme Detayları"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:159,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Ödeme ID:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:165,columnNumber:17},void 0),e.jsxDEV("span",{className:"font-mono text-sm",children:n.id},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:164,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Toplam Tutar:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:170,columnNumber:17},void 0),e.jsxDEV("span",{className:"font-semibold text-lg text-green-600",children:[n.total_amount.toFixed(2)," TL"]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:171,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:169,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Ödeme Durumu:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:177,columnNumber:17},void 0),e.jsxDEV("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:n.payment_status==="completed"||n.payment_status==="processing"?"Tamamlandı":n.payment_status},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:176,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Ödeme Sağlayıcısı:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:184,columnNumber:17},void 0),e.jsxDEV("span",{className:"capitalize",children:n.payment_provider},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:185,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:183,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Ödeme Tarihi:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:189,columnNumber:17},void 0),e.jsxDEV("span",{children:new Date(n.created_at).toLocaleString("tr-TR")},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:190,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:188,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:158,columnNumber:11},void 0),i&&e.jsxDEV("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Escrow Durumu"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:198,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Escrow ID:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:204,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-mono text-sm",children:i.id},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:205,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:203,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Durum:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:209,columnNumber:19},void 0),e.jsxDEV("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:i.status==="held"?"Beklemede":i.status},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:210,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:208,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-600",children:"Escrow Tutarı:"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:216,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-semibold text-lg text-blue-600",children:[i.total_amount.toFixed(2)," TL"]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:217,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:215,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:202,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:197,columnNumber:13},void 0),e.jsxDEV("div",{className:"bg-yellow-50 rounded-lg p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Durum Bilgisi"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:227,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"flex-shrink-0 w-6 h-6 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:233,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-gray-900 mb-1",children:"Cihazınızın Kargo ile Teslim Edilmesi Bekleniyor"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:237,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:["Takip için kargo numaranız: ",e.jsxDEV("span",{className:"font-mono font-semibold",children:"-"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:238,columnNumber:84},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:238,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:236,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:232,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold",children:"2"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:243,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-gray-900 mb-1",children:"Cihaz Teslim Alındığında"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:247,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Teslim aldığınızı onaylayın"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:249,columnNumber:21},void 0),e.jsxDEV(t,{variant:"primary",className:"ml-4",disabled:!0,children:"Onay"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:250,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:248,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:242,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-start space-x-3",children:[e.jsxDEV("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold",children:"3"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:262,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:"İşlem Tamamlandı"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:266,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Cihazınıza kavuştuğunuz için mutluyuz"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:267,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:265,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:261,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:226,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex space-x-4",children:[e.jsxDEV(t,{onClick:g,variant:"secondary",className:"flex-1",children:"Ödemeyi İptal Et"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV(t,{onClick:c,variant:"primary",className:"flex-1",children:"Cihazlarım Listesine Dön"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:274,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-8 text-center",children:e.jsxDEV("p",{className:"text-gray-600 text-sm",children:["Sorularınız için"," ",e.jsxDEV("a",{href:"/contact",className:"text-blue-600 hover:text-blue-800",children:"iletişim sayfamızı"},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:296,columnNumber:15},void 0)," ","ziyaret edebilirsiniz."]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:294,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:293,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:145,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:144,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Code/Project ELMA/2. WEB/iFoundAnApple-Web/pages/PaymentSuccessPage.tsx",lineNumber:143,columnNumber:5},void 0)};export{w as default};
